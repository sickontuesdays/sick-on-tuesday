<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>S!ck on Tuesdays — Guardian Command Layout</title>
<meta name="description" content="Destiny 2 command-center layout matching reference mosaic." />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
<style>
  :root{
    /* Palette */
    --bg:#0a0e13; --panel:#0f1520; --panel2:#121a28;
    --ink:#e7eefc; --muted:#94a7c4; --border:#1f2b3e;
    --arc:#7dd3fc; --arc2:#60a5fa; --good:#34d399;
    --radius:14px; --shadow:0 6px 24px rgba(2,10,20,.35);

    /* Grid unit sizing */
    --colW: 82px;   /* base column width */
    --rowH: 82px;   /* base row height */
    --gap: 14px;    /* grid gap & internal spacing */
  }
  @media (max-width:1300px){ :root{ --colW:76px; --rowH:78px; } }
  @media (max-width:1100px){ :root{ --colW:70px; --rowH:74px; } }
  @media (max-width:900px){  :root{ --colW:62px; --rowH:68px; } }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font:16px/1.55 Rajdhani, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    color:var(--ink);
    background:
      radial-gradient(1100px 600px at 100% -10%, rgba(18,34,56,.55), transparent 60%),
      radial-gradient(900px 500px at -20% 110%, rgba(24,40,62,.55), transparent 60%),
      linear-gradient(180deg, #081018 0%, #060a10 100%);
  }
  /* subtle HUD grid */
  body::before{
    content:""; position:fixed; inset:0; pointer-events:none;
    background:
      linear-gradient(transparent 31px, rgba(125,211,252,.05) 32px),
      linear-gradient(90deg, transparent 31px, rgba(125,211,252,.05) 32px);
    background-size:32px 32px;
    mask-image: linear-gradient(180deg, transparent, #000 12%, #000 88%, transparent);
  }

  .wrap{
    width: min(2000px, 80vw);              /* ← ~80% of browser width */
    margin: 20px auto 60px;
  }

  header{
    display:flex; align-items:baseline; justify-content:space-between; gap:12px; margin-bottom:14px;
  }
  .brand{display:flex; align-items:baseline; gap:12px}
  .brand h1{margin:0; font-size:28px; font-weight:700; letter-spacing:.04em}
  .brand .badge{color:var(--muted); font-size:13px; letter-spacing:.14em; text-transform:uppercase}
  .status{color:var(--muted); font-size:14px}
  .status .dot{display:inline-block; width:9px; height:9px; border-radius:999px; background:var(--good); box-shadow:0 0 12px var(--good); margin-right:8px}

  /* ==== GRID LAYOUT ==== 
     14 columns x 10 rows to match the reference mosaic precisely.
     Left column group (A/B/C) = cols 1–3
     Main hero D = cols 4–12, rows 1–6
     Right tall H = col 13, rows 1–6
     Circles I/J column = col 14, rows 7–9
     E/F/G row under D = cols 4–12, rows 7–9 (three equal squares)
     K bottom bar = cols 10–14, row 10
  */
  .grid{
    display:grid;
    grid-template-columns: repeat(14, minmax(var(--colW), 1fr));
    grid-auto-rows: var(--rowH);
    gap: var(--gap);
  }

  /* Module base */
  .mod{
    position:relative;
    background:linear-gradient(180deg, var(--panel) 0%, var(--panel2) 140%);
    border:1px solid var(--border);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:14px 14px 12px;
    overflow:hidden;
    transition: border-color .2s ease, transform .08s ease;
  }
  .mod:hover{ border-color:#2a3a52; transform: translateY(-1px); }
  .title{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    margin:0 0 8px; font-size:18px; letter-spacing:.03em;
  }
  .title small{color:var(--muted); font-size:12px; letter-spacing:.12em; text-transform:uppercase}
  .toggle{
    position:absolute; top:8px; right:8px;
    border:1px solid var(--border); border-radius:10px;
    background:linear-gradient(180deg,#132033,#0e1726);
    color:var(--ink); padding:6px 10px; cursor:pointer;
    font-weight:700; font-size:12px; letter-spacing:.06em; text-transform:uppercase;
  }
  .toggle:hover{border-color:#2a3a52}
  .summary{color:var(--muted); font-size:14px}
  .details{display:none; color:var(--ink); font-size:14px}
  a{color:var(--arc); text-decoration:none}
  a:hover{text-decoration:underline}
  .t{width:100%; border-collapse:collapse; margin-top:8px; font-size:14px}
  .t th,.t td{padding:8px 10px; border-bottom:1px solid var(--border); text-align:left}
  .tag{display:inline-block; padding:2px 8px; border:1px solid var(--border); border-radius:999px; font-size:12px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted)}

  /* ==== EXACT INITIAL POSITIONS (from your sketch) ==== */
  /* Left stack */
  .pos-A { grid-column: 1 / span 3; grid-row: 1 / span 3; }  /* square */
  .pos-B { grid-column: 1 / span 3; grid-row: 4 / span 3; }  /* square */
  .pos-C { grid-column: 1 / span 3; grid-row: 7 / span 1; }  /* slim bar */

  /* Top center hero & right column */
  .pos-D { grid-column: 4 / span 9; grid-row: 1 / span 6; }  /* hero */
  .pos-H { grid-column: 13 / span 1; grid-row: 1 / span 6; } /* tall bar */

  /* Bottom row under D: E F G squares */
  .pos-E { grid-column: 4 / span 3; grid-row: 7 / span 3; }
  .pos-F { grid-column: 7 / span 3; grid-row: 7 / span 3; }
  .pos-G { grid-column: 10 / span 3; grid-row: 7 / span 3; }

  /* Rightmost circles column (I over J) */
  .pos-circles { grid-column: 14 / span 1; grid-row: 7 / span 3; padding: 12px; }

  /* Bottom right bar */
  .pos-K { grid-column: 10 / span 5; grid-row: 10 / span 1; }

  /* ==== EXPANSION BEHAVIOR ==== */
  .mod.expanded-main    { grid-column: 4 / span 9; grid-row: 1 / span 6; }  /* grows to D footprint */
  .mod.expanded-quarter { grid-column: 4 / span 4; grid-row: 1 / span 3; }  /* ~¼ of D */

  .mod.expanded-main,
  .mod.expanded-quarter { z-index: 10; }

  .grid.has-expanded { grid-auto-flow: dense; }
  .grid.has-expanded .mod:not(.expanded-main):not(.expanded-quarter){
    grid-column: auto / span 2;
    grid-row: auto / span 1;
    padding: 12px;
  }
  .grid.has-expanded .mod:not(.expanded-main):not(.expanded-quarter) .summary{ font-size:13px }

  /* ==== Circles module (true circles, no boxes) ==== */
  .circle-stack{
    --gap: 12px;
    display:grid;
    grid-template-rows: 1fr 1fr;
    align-content: stretch;
    justify-items: center;
    gap: var(--gap);
    height: 100%;
  }
  .circle{
    width: var(--circle-d, 60px);        /* JS computes this to fill the space */
    height: var(--circle-d, 60px);
    border-radius: 50%;
    border: 3px solid #2a3a52;           /* outline only (no box) */
    background: radial-gradient(circle at 30% 35%, rgba(125,211,252,.12), transparent 55%),
                #0c1320;
    box-shadow: inset 0 0 12px rgba(125,211,252,.12);
  }

  /* Responsive fallback stack (keeps proportions while narrower) */
  @media (max-width: 880px){
    .wrap{ width: min(1100px, 94vw); }
    .grid{ grid-template-columns: repeat(8, minmax(70px, 1fr)); }
    /* Reasonable stacked approximation for small screens */
    .pos-A { grid-column: 1 / span 3; grid-row: 1 / span 3; }
    .pos-B { grid-column: 1 / span 3; grid-row: 4 / span 3; }
    .pos-C { grid-column: 1 / span 3; grid-row: 7 / span 1; }
    .pos-D { grid-column: 4 / span 5; grid-row: 1 / span 6; }
    .pos-H { grid-column: 8 / span 1; grid-row: 1 / span 6; }
    .pos-E { grid-column: 4 / span 2; grid-row: 7 / span 3; }
    .pos-F { grid-column: 6 / span 2; grid-row: 7 / span 3; }
    .pos-G { grid-column: 1 / span 3; grid-row: 9 / span 3; }
    .pos-circles { grid-column: 8 / span 1; grid-row: 7 / span 3; }
    .pos-K { grid-column: 4 / span 5; grid-row: 10 / span 1; }

    .mod.expanded-main{ grid-column:1 / span 8; grid-row:1 / span 6; }
    .mod.expanded-quarter{ grid-column:1 / span 4; grid-row:1 / span 3; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <h1>Guardian Command</h1>
        <span class="badge">S!ck on Tuesdays</span>
      </div>
      <div class="status"><span class="dot"></span>Layout Synced</div>
    </header>

    <main class="grid" id="grid">
      <!-- A -->
      <section class="mod pos-A" data-expand="main" aria-label="Panel A">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">A <small>Briefing</small></h3>
        <div class="summary">High-level status, quick notes.</div>
        <div class="details">
          <ul><li>Detail 1</li><li>Detail 2</li><li>Detail 3</li></ul>
        </div>
      </section>

      <!-- B -->
      <section class="mod pos-B" data-expand="main" aria-label="Panel B">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">B <small>Assignments</small></h3>
        <div class="summary">Pending tasks, ops queue.</div>
        <div class="details">
          <table class="t"><tbody><tr><td>Op</td><td>Status</td></tr><tr><td>Vault</td><td>Ready</td></tr></tbody></table>
        </div>
      </section>

      <!-- C -->
      <section class="mod pos-C" data-expand="main" aria-label="Panel C">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">C <small>Alert Strip</small></h3>
        <div class="summary">Low-risk advisories.</div>
        <div class="details">Expanded: show detailed alerts here.</div>
      </section>

      <!-- D HERO -->
      <section class="mod pos-D" data-expand="main" aria-label="Panel D (Hero)">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">D <small>Season Overview</small></h3>
        <div class="summary">Main module footprint for expansions.</div>
        <div class="details">
          <table class="t">
            <thead><tr><th>Activity</th><th>Reward</th><th>Notes</th></tr></thead>
            <tbody>
              <tr><td>Nightfall</td><td>Pinnacle</td><td>Arc Surge • Champs</td></tr>
              <tr><td>Raid</td><td>Pinnacle</td><td>Challenge rotation</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- H (tall) -->
      <section class="mod pos-H" data-expand="main" aria-label="Panel H">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">H <small>Right Column</small></h3>
        <div class="summary">Static intel column.</div>
        <div class="details">Expanded: vendor rolls, rotations, etc.</div>
      </section>

      <!-- E -->
      <section class="mod pos-E" data-expand="main" aria-label="Panel E">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">E <small>Tools</small></h3>
        <div class="summary">DIM • light.gg • TiD</div>
        <div class="details">
          <ul>
            <li><a href="https://app.destinyitemmanager.com/" target="_blank" rel="noopener">DIM</a></li>
            <li><a href="https://www.light.gg/" target="_blank" rel="noopener">light.gg</a></li>
            <li><a href="https://www.todayindestiny.com/" target="_blank" rel="noopener">Today in Destiny</a></li>
          </ul>
        </div>
      </section>

      <!-- F -->
      <section class="mod pos-F" data-expand="main" aria-label="Panel F">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">F <small>Builds</small></h3>
        <div class="summary">Warlock/Titan/Hunter</div>
        <div class="details">
          <ul><li>Warlock: Arc Soul</li><li>Titan: Banner</li><li>Hunter: Strand</li></ul>
        </div>
      </section>

      <!-- G -->
      <section class="mod pos-G" data-expand="main" aria-label="Panel G">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">G <small>Activity</small></h3>
        <div class="summary">Nightfall • Dungeon • Crucible</div>
        <div class="details">Expanded: modifiers & challenges.</div>
      </section>

      <!-- Circles I/J (no boxes) -->
      <section class="mod pos-circles" data-expand="quarter" id="circlesMod" aria-label="Circles I & J">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">I &amp; J <small>Signals</small></h3>
        <div class="summary">
          <div class="circle-stack" id="circleStack">
            <div class="circle" title="I"></div>
            <div class="circle" title="J"></div>
          </div>
        </div>
        <div class="details">
          <p>Expanded: telemetry details for each signal.</p>
        </div>
      </section>

      <!-- K bottom bar -->
      <section class="mod pos-K" data-expand="main" aria-label="Panel K">
        <button class="toggle" aria-expanded="false">Expand</button>
        <h3 class="title">K <small>Footer Bar</small></h3>
        <div class="summary">Status, links, or ticker.</div>
        <div class="details">Expanded: extended footer content.</div>
      </section>
    </main>
  </div>

<script>
/* Expand/Collapse logic + circle auto-sizing */
document.addEventListener('DOMContentLoaded', () => {
  const grid = document.getElementById('grid');
  const modules = [...document.querySelectorAll('.mod')];

  function collapseAll() {
    grid.classList.remove('has-expanded');
    modules.forEach(m => {
      m.classList.remove('expanded-main','expanded-quarter');
      const btn = m.querySelector('.toggle');
      if (btn) { btn.setAttribute('aria-expanded','false'); btn.textContent = 'Expand'; }
      const s = m.querySelector('.summary'); if (s) s.style.display = '';
      const d = m.querySelector('.details'); if (d) d.style.display = 'none';
    });
    sizeCircles(); // recalc after layout change
  }

  function expand(mod) {
    const cls = (mod.dataset.expand === 'quarter') ? 'expanded-quarter' : 'expanded-main';
    const already = mod.classList.contains('expanded-main') || mod.classList.contains('expanded-quarter');
    if (already) { collapseAll(); return; }

    collapseAll();
    mod.classList.add(cls);
    grid.classList.add('has-expanded');

    const s = mod.querySelector('.summary'); if (s) s.style.display = 'none';
    const d = mod.querySelector('.details'); if (d) d.style.display = 'block';

    const btn = mod.querySelector('.toggle');
    if (btn) { btn.setAttribute('aria-expanded','true'); btn.textContent = 'Collapse'; }

    sizeCircles(); // recalc after layout change
  }

  grid.addEventListener('click', (e) => {
    const btn = e.target.closest('.toggle');
    if (!btn) return;
    const mod = btn.closest('.mod');
    if (mod) expand(mod);
  });

  document.addEventListener('click', (e) => {
    if (!e.target.closest('.mod')) collapseAll();
  });

  // --- Circle sizing: fill available column height/width neatly (keeps perfect circles)
  function sizeCircles(){
    const mod = document.getElementById('circlesMod');
    if (!mod) return;
    const stack = document.getElementById('circleStack');
    if (!stack) return;

    // Available inner box size
    const modStyles = getComputedStyle(mod);
    const padV = parseFloat(modStyles.paddingTop) + parseFloat(modStyles.paddingBottom);
    const padH = parseFloat(modStyles.paddingLeft) + parseFloat(modStyles.paddingRight);

    const rect = mod.getBoundingClientRect();
    const innerH = rect.height - padV - 36;   // - approx header & margin height
    const innerW = rect.width  - padH;

    const gap = parseFloat(getComputedStyle(stack).getPropertyValue('--gap')) || 12;

    // Two circles stacked: diameter fits min(width, (innerH - gap)/2)
    const diameter = Math.max(24, Math.min(innerW, (innerH - gap) / 2));
    mod.style.setProperty('--circle-d', `${diameter}px`);
  }

  sizeCircles();
  window.addEventListener('resize', sizeCircles);
});
</script>
</body>
</html>
